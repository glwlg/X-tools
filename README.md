# x-tools

x-tools 是一款专为 Windows 打造的轻量级、极简风格的本地搜索与效率工具。

它结合了 Everything 强大的搜索能力和现代化的设计感，旨在通过最少的按键完成最常见的操作。

## ✨ 核心特性

-   **极速搜索**：基于 Everything SDK，瞬间检索全盘文件。
-   **应用启动**：智能扫描系统已安装应用，支持通过拼音或名称快速启动。
-   **计算器模式**：在搜索框输入 `c` 并选择进入，即可进行实时数学运算，支持括号、常用函数。
-   **全局唤起**：默认快捷键 `Alt + Q` (可配置)，随时随地呼出/隐藏界面。
-   **单例运行**：防止多个实例重复运行，节省系统资源。
-   **托盘控制**：支持系统托盘图标，方便快速退出或调整设置。
-   **精致设计**：
    -   无边框半透明界面。
    -   完美支持深色/浅色模式切换。
    -   全键盘操作，支持 `Tab`/`箭头` 导航。

## 🛠️ 环境要求

-   **操作系统**：Windows 10/11。
-   **Everything 服务**：运行前需确保 **[Everything](https://www.voidtools.com/)** 已安装并在后台运行（它是搜索功能的引擎）。

## 🚀 开发与运行

本项目使用 `uv` 进行依赖管理（比 pip 快 10-100 倍）。

### 1. 安装依赖
```bash
uv sync
```

### 2. 运行程序
```bash
uv run main.py
```

### 3. 打包发布

项目提供了完善的打包脚本，可生成单一可执行文件及安装包。

-   **生成二进制 EXE** (在 `dist/x-tools` 目录下):
    ```bash
    uv run build_exe.py
    ```
-   **创建安装程序** (生成 `x-tools-setup.exe`):
    ```bash
    uv run create_installer.py
    ```

## 📦 安装说明

生成的安装包具备以下功能：
-   自动安装至 `%LOCALAPPDATA%\Programs\x-tools`。
-   自动创建桌面及开始菜单快捷方式（带自定义图标）。
-   附带 **卸载程序 (uninstall.exe)**，支持一键干净卸载。

## 🔌 插件系统

x-tools 拥有一个可扩展的插件系统，允许开发者轻松添加自定义功能。当前已内置 **计算器插件**。

### 如何使用
- 在搜索框输入特定的 **触发词**（例如 `c`）。
- 从结果列表中选择对应的插件模式（例如 `Calculator Mode`）并按 `回车`。
- 进入插件模式后，搜索框将变为专用输入框。按 `Esc` 可退出插件模式返回常规搜索。

### 核心架构
插件基于 `src/core/plugin_base.py` 中的 `PluginBase` 基类构建，主要包含以下接口：
- `get_keywords()`: 返回触发该插件的关键字。
- `execute(query)`: 处理用户的输入并返回结果列表。
- `on_enter()` / `on_exit()`: 插件模式切换时的生命周期钩子。

### 自定义开发
您可以参照 `src/plugins/calculator.py` 编写自己的插件：
1. 在 `src/plugins` 目录下新建 Python 文件。
2. 继承 `PluginBase` 并实现相关逻辑。
3. 在 `src/ui/search_window.py` 中实例化并注册您的插件。

## ⌨️ 快捷操作

-   `Alt + Q`：显示/隐藏搜索窗口。
-   `Enter`：启动选中项目。
-   `Esc`：退出当前插件模式或隐藏窗口。
-   `Tab` / `方向键`：在搜索结果间移动。
-   `右键点击结果`：打开文件所在位置、复制路径或执行其他操作。

## 📜 许可证

Apache-2.0 License
